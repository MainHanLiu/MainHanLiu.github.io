---
title: "C语言一行太长的换行处理"
description: 
date: 2023-08-28 10:00:00 +0800
categories: [Code, C]
tags: [Code, C]
pin: false

media_subpath: ""
#
# image:
#   path: 'assets/**/**.jpg'
#   alt: Here is the text upder the image
---

在C语言程序编写中，我们有时会遇到一行代码太长而影响阅读或者出现与部分公司或组织要求的编码规范不符的情况，此时我们需要将这行代码分成多行来写。

## 一、针对一般语句换行  
使用\结尾作为换行标记  
在编译时，`\`后面的换行符将被忽略，当做一行处理。比如宏定义时使用  
```c
#define my_puts(x) printf("%s", \
    x);
```
和写成
```c
#define my_puts(x) printf("%s",x);
```
是没区别的。

**针对宏定义中换行，换行符`\`必不可少。**

针对执行语句的换行，我们同样可以使用`\`作为换行符，同时当一个语句过长时，直接换行，也并不会影响语句的编译  
```c
if(NULL != input\
&& TRUE == input->state)
```
与
```c
if(NULL != input 
&& TRUE == input->state)
```
相同，它们所表达的都是
```c
if(NULL != input && TRUE == input->state)
```

## 二、针对字符串换行  
当字符串过长，写在一行中阅读不便时，我们也可以采用`\`作为换行标识符  
```c
printf("Hello \
world\n");
```
但是此时使用`\`作为换行标识符时，**需要注意换行后的内容顶格写**，如果采取缩进方式的话，开头的空格也会被计算进字符串中，  
```c
    printf("Hello \
    world\n");
```
此处我们在stdout输出的将会是:`Hello　　world`，也就是会将world前面的空格计入字符串中去。  

很多情况下，我们使用缩进是为了便于代码阅读，针对上述的字符串换行，我们可以采用另外的方式处理。  

> 注：C语言规定，连续的用`""`引起的字符串常量，会默认合并为一个常量字符串

所以，在字符串换行处理时，我们可以使用`""`
```c
    printf("Hello "
    "world\n");
```
与
```c
printf("Hello world");
```
相同。

使用`""`处理方式，我们就可以不用考虑未顶格时的空格会被计入字符串了，可以放心的使用缩进而不至于造成程序代码的误解。

## Conclusion
- 针对宏定义中换行，换行符`\`必不可少。  
- 针对执行语句中的换行，使用换行符`\`和直接换行的效果一样。  
- 针对字符串换行，推荐连续使用多个`""`进行合并  
