---
title: "Code Traps"
description: 
date: 2023-07-01 10:00:00 +0800
categories: [Code, Traps]
tags: [Code, Traps]
pin: false

media_subpath: ""
#
# image:
#   path: 'assets/**/**.jpg'
#   alt: Here is the text upder the image
---

- 在多线程编程下,要注意缓存buf不能进行复用,容易产生污染数据,或着在同一个缓存buf的不同操作中使用互斥锁进行保护

- hex文件无法烧录：排查线序，J-LINK, 接线, J-FLASH。问题：J-FLASH版本为v7.88，版本太高导致软件中止烧录，降级v7.66后，问题解决。

- 在继电器输出后需要进行一定的延时，以等待DO的输出变化完全稳定,不能立刻去读取这个输出,可能会不准确(DI-DO互连的工厂测试场景下)

- 读取DI输入时需要进行多次消抖处理，防止抖动误报（尤其是会触发联动动作时）

- 产生了一个`*_p_u8_Buf`不小心改成`_u16_Len`，数组索引采用16位，而数组仅有256字节，从而导致数组索引越界，程序跑飞的问题

- DI读取需要进行防抖处理，在接线较长或者出现高压时，易出现抖动，读取输入一般需要做防抖。

- 拨码地址读取时需要进行先在临时变量中，读取完成后再更新至全局变量，防止抖动

- 可能会导致程序产生问题的地方： 大电流的功率线产生信号上的干扰，影响了程序的逻辑判断状态或者数据传输
