---
title: "Git: 已有本地仓库 → 关联到新的远程仓库"
description: 
date: 2026-01-08 10:00:00 +0800
categories: [GIT]
tags: [GIT, fork]
pin: false

media_subpath: ""
#
# image:
#   path: 'assets/**/**.jpg'
#   alt: Here is the text under the image
---

## 已有本地仓库关联到新的远程仓库
当一个代码仓库是基于一个已有的git仓库做新开发时，若希望在新的git仓库中保留原有的代码提交记录（无法直接fork时）

将已有的git仓库clone至本地
```bash
git clone xxxxx
```

删除远程分支关联
```bash
git remote remove origin
```

关联到新的远程仓库
```bash
git remote add origin https://github.com/xxx/yyy.git
```

或者上述两步改为修改origin的地址
```bash
git remote set-url origin https://github.com/xxx/yyy.git
```

查看当前远程地址
```bash
git remote -v
```

推送本地的提交记录到新的远程，注意，推送的分支名称不能与新的远程仓库中的已有分支名字相同
```bash
git push -u origin main
```
推送后，远程仓库会完整同步你的全部本地提交记录

可选：远程仓库默认会有一个master分支和HEAD指针，若希望HEAD指针指向的是开发的主分支，则可以将本地的main分支合并至远程的master分支，并且后续基于master分支进行开发。（没有直接修改HEAD指针的权限时）


## fork后将上游仓库的更新合并到本地仓库
upstream（原仓库） → local（本地仓库） → origin（fork的远程仓库）

首先，添加 upstream（原仓库）
```bash
git remote add upstream  xxxxx
```

获取上游仓库最新提交
```bash
git fetch upstream
```

切换至本地master分支
```bash
git checkout master
```

将上游仓库的最新提交合并至本地仓库的master分支
```bash
git merge upstream/master
```

合并成功后将本地仓库推送至远程仓库
```bash
git push origin master
```
