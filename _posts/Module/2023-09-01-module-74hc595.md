---
title: "IO扩展芯片-74HC595"
description: 
date: 2023-09-01 10:00:00 +0800
categories: [Module, 74HC595]
tags: [Module, 74HC595, IO拓展]
pin: false

media_subpath: ""
#
# image:
#   path: 'assets/**/**.jpg'
#   alt: Here is the text upder the image
---


## **IO扩展芯片**  
在设计单片机电路的过程中，往往会遇到这种情况：单片机的IO口不够用，但是又不是缺很多，如果要更换更多引脚的单片机可能会贵一些，如果是老产品的话，还要涉及到代码的移植。在单片机的I/O口不够的情况下，经常会需要IO扩展的设计。

74系列逻辑芯片非常经典，而且功能强大，可以实现对单片机IO口的扩展。常用的扩展芯片有74HC138、74HC165、74HC595、74HC164、74HC148等。这类数字芯片可以使用较少的单片机IO，即可实现多路输入或者多路输出，但是需要根据芯片的时序图或者真值表进行编程。

74LS属于TTL类型的集成电路，而74HC属于CMOS集成电路。74HC系列是高速CMOS标准逻辑电路系列，具有与74LS系列同等的工作度和CMOS集成电路固有的低功耗及电源电压范围宽等特点，具有相当于74LS高速度的性能，属于一种高速低功耗产品。74HCxxx是74LSxxx同序号的翻版，型号最后几位数字相同，表示电路的逻辑功能、管脚排列完全兼容，为用74HC替代74LS提供了方便。

74HC164是串入并出的移位寄存器，占用单片机3个IO口就可以实现8个IO口的输出。与该芯片类似的芯片是74HC595，该芯片是带锁存的移位寄存器，并且可以级联扩展，即通过3个IO口就能实现多个八路输出的扩展。

## **74HC595**  
SNx4HC595 器件包含对 8 位 D 类存储寄存器进行馈送的 8 位串行输入/并行输出移位寄存器。存储寄存器具有并行三态输出。移位寄存器和存储寄存器分别有单独的时钟。移位寄存器具有一个直接覆盖清零 (SRCLR) 输入以及用于级联结构的串行 (SER) 输入和串行输出。当输出使能端 (OE) 输入为高电平时，输出处于高阻抗状态。

![引脚图](/imgs/module-74hc595/2023-09-01/znBRgfapEpueVdwu.png)

SNx4HC595 是用于 CMOS 应用的 HC 系列逻辑器件中的一部分。SNx4HC595 器件包含对 8 位 D 类存储寄存器进行馈送的 8 位串行输入/并行输出移位寄存器。

移位寄存器时钟 (SRCLK) 和存储寄存器时钟 (RCLK) 均为正边沿触发。如果将两个时钟连接在一起，则移位寄存器始终比存储寄存器早一个时钟脉冲。

SNx4HC595 器件是 8 位串行输入、并行输出移位寄存器。它们具有 2V 至 6V 的宽工作电流，大电流三态输出可驱动多达 15 个 LSTTL 负载。这些器件具有 80μA（最大值）ICC 的低功耗。此外，这些器件具有 1μA（最大值）的低输入电流和 5V 时的 ±6mA 输出驱动。

![功能表](/imgs/module-74hc595/2023-09-01/ULXBrionmXGRg8b0.png)

通常将RCLK置为低电平，当移位结束后，在RCLK端产生一个正脉冲（5V时，大于几十纳秒就行了。通常都选微秒级），更新显示数据。

1. 74164和74595功能相仿，都是8位串行输入转并行输出移位寄存器。74164的驱动电流（25mA）比74595（35mA）的要小，14脚封装，体积也小一些。  
2. 74595的主要优点是具有数据存储寄存器，在移位的过程中，输出端的数据可以保持不变。这在串行速度慢的场合很有用处，数码管没有闪烁感。  
3. 与74hc164只有数据清零端相比，74hc595还多有输出端使能/禁止控制端OE，可以使输出为高阻态。所以使用这块芯片会更方便  
4. 74HC595是具有8位移位寄存器和一个存储器，三态输出功能。移位寄存器和存储器是分别的时钟。数据在SRCLK的上升沿输入，在RCLK的上升沿进入存储寄存器中去。如果两个时钟连在一起，则移位寄存器总是比存储寄存器早一个脉冲。移位寄存器有一个串行移位输入（SER），和一个串行输出（QH'），和一个异步的低电平复位，存储寄存器有一个并行8位的，具备三态的总线输出，当使能OE时（低电平），存储寄存器的数据输出到总线。  


![功能方框图](/imgs/module-74hc595/2023-09-01/J9441sDHS235XDkk.png)

功能方框图，图中第一列为移位寄存器（SR-ShiftRegister，SRA ~ SRH），数据从它们的输入引脚输入，从输出引脚输出，每次移位脉冲引脚（SRCLK）提供一个脉冲，输入引脚的数据就会输出并保持到输出引脚，因为这里的移位脉冲引脚（SRCLK）是连到每一个SR上的，所以自然每次给一个移位脉冲的时候，所有的数据都向后移动了一位。这里我们注意到，第一个SR的输入引脚连接的是串行数据输入，也就是我们的数据引脚。所以每次给脉冲移位之前，我们需要准备好该引脚的值，因为每次给一个脉冲，它的数据就会移入后方。

很直观的看到，我们给几个脉冲，数据引脚就会有几次被移入移位寄存器，并且这些值会保持在各个SR的输出引脚。所以假设我们要将一个字节移入移位寄存器，因为1个字节是8位的，所以我们需要给出8个脉冲，那么8个移位寄存器的Q脚就保持了这8位值，再看看这8位值，它是先在数据引脚输出的值就会走得越远，所以如果我们先输出数据高位的话，最高位在8个脉冲后就会跑到SRH的输出引脚。

图中第二列为存储寄存器，每次存储寄存器时钟（RLCK）给一个脉冲，存储寄存器就会输出并保持移位寄存器的值。我们可以把存储寄存器看成就是照相机，锁存脉冲引脚就相当于是照相机的快门，我们给一个锁存脉冲，那么数据被锁存在了对应的输出引脚。而当我们没有操作锁存引脚的时候，照相机只是摆在那里，不管队伍怎么前进了，照相机的输出始终是不变的。只有某次按下了快门，所有的照相机的照片就都更新了一次。

74HC595的数据来源只有一个口，一次只能输入一个位，那么连续输入8次，就可以积攒为一个字节。  
第一个从SER送入的bit将会从QH'出去。当移位寄存器中的数据多于8bit时，会把已有的bit“挤出去”，就是从QH'出去。可用于595的级联。  
例如：将二进制数据0111 1111 输入到595的移位寄存器中  
![595数据输入举例](/imgs/module-74hc595/2023-09-07/HStFZUzUOXqUABZW.png)  
138译码器通过3个输入口控制8个输出口，而且还只能是特定的8个输出值，而595只用了一个输入口就可以输任意的8位数据，可谓短小精悍。  
在上面的使用中未用到QH'脚，如果要让2个595串联起来的话，就需要它了。我们将移位寄存器的8个位填满后，再往移位寄存器中塞一个，移位寄存器的最后一位数据QH就会被挤出去，输出到QH'。如果我们把第一个595的QH'连接到第二个595的串行数据输入脚SER，就形成了595的级联，可以使用1口控制16口，依此类推。  
